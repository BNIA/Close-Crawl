{% extends 'components/base.html' %}

{% block home_url %}{% url 'index' %}{% endblock %}

{% block nav_options %}
    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            <li>
                <a class="page-scroll" href="{% url 'dashboard' %}">
                    Dashboard
                </a>
            </li>
            <li>
                <a class="page-scroll"
                   href="{% url 'dataframe' dataframe_id=dataframe.id %}">
                    Dataset
                </a>
            </li>
        </ul>
    </div>
    <!-- /.navbar-collapse -->
{% endblock %}


{% block content %}

    <div id="slider"></div>

    <section class="bg-primary">
        <div class="container">

            <form class="form-inline" method="POST">
                {% csrf_token %}

                <label for="id_features_0">
                    <h2>Features:</h2>
                </label>

                <ul id="id_features">
                    {% for index, col in gridsearch_form.fields.features.widget.choices %}

                        <li>
                            <input class="styled-checkbox" checked=""
                                   id="id_features_{{ index|add:'-1' }}"
                                   name="features" type="checkbox"
                                   value="{{ col }}"/>
                            <label class="styled-checkbox"
                                   for="id_features_{{ index|add:'-1' }}">
                                {{ col }}
                            </label>
                        </li>

                    {% endfor %}
                </ul>

                <ul id="id_scoring">
                    {% for index, col in gridsearch_form.fields.scoring.widget.choices %}
    
                        <li>
                            <input id="id_scoring_{{ index|add:'-1' }}"
                                   name="scoring" type="radio"
                                   value="{{ col }}"/>
                            <label for="id_scoring_{{ index|add:'-1' }}">
                                {{ col }}
                            </label>
                            <div class="check"></div>
                        </li>

                    {% endfor %}
                </ul>

                <ul>
                    <label for="id_test_train_ratio">
                        <h4>Test train ratio: </h4>
                    </label>
                </ul>

                <ul>
                    <input id="id_test_train_ratio" name="test_train_ratio" 
                    max="100" min="0" type="text" data-slider-min="0"
                    data-slider-max="100" data-slider-step="1" data-slider-value="0"/>
                    <span id="test_train_slider_label">
                        Test data: 
                        <span id="test_train_slider_val">0</span> %
                    </span>
                 </ul>

                <ul>
                    <label for="id_shuffle_ratio">
                        <h4>Shuffle: </h4>
                    </label>
                </ul>

                <ul>
                    <input id="id_shuffle_ratio" name="shuffle_ratio" 
                    max="1000" min="0" type="text" data-slider-min="0"
                    data-slider-max="1000" data-slider-step="1" data-slider-value="0"/>
                    <span id="shuffle_slider_label">
                        Shuffle: 
                        <span id="shuffle_slider_val">0</span>
                    </span>
                 </ul>

                <input type="submit" value="submit" class="page-scroll btn btn-default btn-xl sr-button">

            </form>

        </div>
    </section>

    <!-- Score Modal -->

    <div class="portfolio-modal modal fade" id="scores" tabindex="-1" role="dialog" aria-hidden="true">
        <div class="modal-content">
            <div class="close-modal" data-dismiss="modal">
                <div class="lr">
                    <div class="rl">
                    </div>
                </div>
            </div>
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-8 col-lg-offset-2">
                        <div class="modal-body">
                            <h2>Scores</h2>
                            <hr class="star-primary">
                            <h3>Scoring: {{ gs_obj.scoring }}</h3>
                            <hr class="star-primary">
                            <div class="table-responsive">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            {% for header in gs_obj.get_scores.best.0 %}
                                                <th>{{ header }}</th>
                                            {% endfor %}
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            {% for report in gs_obj.get_scores.best %}
                                            <tr>
                                                {% for attr in report.values %}
                                                <td>{{ attr }}</td>
                                                {% endfor %}
                                            </tr>
                                            {% endfor %}
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <button type="button" class="btn btn-default" data-dismiss="modal">
                                <i class="fa fa-times"></i>
                                Close
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




{% endblock %}